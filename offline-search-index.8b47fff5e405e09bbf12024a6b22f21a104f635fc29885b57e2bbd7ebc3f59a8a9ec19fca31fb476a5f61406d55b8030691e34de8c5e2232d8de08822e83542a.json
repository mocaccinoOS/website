[{"body":"At the moment are available alpha/testing ISO releases only.\nOfficial releases will be done with Github in the official repository\n","excerpt":"At the moment are available alpha/testing ISO releases only.\nOfficial ‚Ä¶","ref":"/docs/desktop/download/","title":"Download"},{"body":" Warning Mocaccino and Luet are under active development and should not be considered ‚Äúproduction ready‚Äù at this time. The following steps should only be carried out on test systems. Do make sure you have any important data backed up before starting a migration.  You can convert a Sabayon system (running Entropy) to Mocaccino OS (running luet) with the following commands as root\n1 2 3  curl https://get.mocaccino.org/luet/get_luet_root.sh | sh luet install system/luet-migrate-entropy luet migrate-entropy   The migrate-entropy script detects packages that are installed and fills the luet database. If you for some reason need to repeat this step, please remove the luet database first. rm /var/luet/db/luet.db\nMigrations have been checked for systems running Sabayon 18.05 and newer. You can check which version of Sabayon you are running with cat /etc/sabayon-release.\nEnabling the Portage Tree layer Once converted to Mocaccino OS, you will want to enable the Mocaccino Repositories\n1 2 3  luet install repository/mocaccino-os-commons luet install repository/mocaccino-extra-stable luet install repository/mocaccino-desktop-stable   Upgrading to the latest packages Install all available newer packages from the Mocaccino repositories using:\n1  luet upgrade   And finally, review and merge any changes to your configuration files:\n1  etc-update   Remove cached downloads If you wish to reclaim the disk space used by the upgrade process (downloaded packages and cached metadata), you can do so using:\n1  luet cleanup   ","excerpt":" Warning Mocaccino and Luet are under active development and should ‚Ä¶","ref":"/docs/desktop/migrating/","title":"Migrating from Sabayon"},{"body":"Init system The Micro and MicroServer ISO flavors are using runit as init system. For ease of use, a very simple helper is provided, and can be used as follows:\nList available services 1  $ runit-list   Start a service 1  $ runit-start sshd   Stop a service 1  $ runit-stop sshd   Enable a service on boot 1  $ runit-enable sshd   Disable a service from booting on startup 1  $ runit-disable sshd   Boot scripts It‚Äôs possible to add scripts to be executed during boot execution, under /etc/runit/core-services/*.sh.\nFor example:\n1  $ echo \"modprobe e1000e\" \u003e /etc/runit/core-services/modules.sh   Yip Integration Mocaccino Micro can be configured to execute yipfiles during different stages.\n1  $ luet install runit-srv/yip   To start the yip service:\n1  $ runit-start yip   To Enable yip on boot:\n1  $ runit-enable yip   Yip files running periodically The yip service runs periodically yip files in /etc/yip.d, /etc/yip.yaml and from the boot cmdline on the system.\nFor example, by creating a yip file as /etc/yip.d/sshd.yaml:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  name:\"sshd\"stages:reconcile:- name:\"sshd_config setup\"commands:- chmod644/etc/ssh/sshd_configfiles:- path:\"/etc/ssh/sshd_config\"owner:0group:0permission:644content:| AuthorizedKeysFile %h/.ssh/authorized_keysPermitRootLoginyesListenAddress0.0.0.0  yip will make sure and keep sshd configured.\nThere are two stages currently supported: reconcile and boot. The boot yip stage is run at start, during runit initialization, while the reconcile is called periodically. You can also run yip-reconcile to trigger the execution manually.\nFor more information about yip, check here. To see a sample /etc/yip.d control-repo check here.\nSpecifing yip files from boot It is also possible to use yip to automatically configure the system from boot.\nAdd yip=... to the boot command lines to specify the yip file to execute across the stages (can be a path to a local file, or either a URL)\nExamples  yipcontrol-sample  ","excerpt":"Init system The Micro and MicroServer ISO flavors are using runit as ‚Ä¶","ref":"/docs/micro/service-management/","title":"Service Management and Init"},{"body":"MocaccinoOS uses luet as a package manager. Here in this document are collected references from the luet docs.\nInstalling a package To install a package with luet, simply run:\n1 2 3  $ luet install \u003cpackage_name\u003e   Uninstalling a package To uninstall a package with luet, simply run:\n1 2 3  $ luet uninstall \u003cpackage_name\u003e   Upgrading the system To upgrade your system, simply run:\n1 2 3  $ luet upgrade   Searching a package To search a package:\n1 2 3  $ luet search \u003cregex\u003e   To search a package and display results in a table:\n1 2 3  $ luet search --table \u003cregex\u003e   To look into the installed packages:\n1 2 3  $ luet search --installed \u003cregex\u003e   Note: the regex argument is optional\nSearch output Search can return results in the terminal in different ways: as terminal output, as json or as yaml.\nJSON 1 2 3  $ luet search --json \u003cregex\u003e   YAML 1 2 3  $ luet search --yaml \u003cregex\u003e   Tabular 1 2 3  $ luet search --table \u003cregex\u003e   References  Luet docs  ","excerpt":"MocaccinoOS uses luet as a package manager. Here in this document are ‚Ä¶","ref":"/docs/desktop/usage/","title":"Luet commands"},{"body":"Installation At the moment Micro images are tested to be bootable with Virtualbox, and can be installed in VMs.\nTo install Micro on a virtual machine, run mocaccino-unattended-installer.\nDefault username The default account is root with password mocaccino\nSSH Access add PermitRootLogin yes to /etc/ssh/sshd_config with your editor of choice ( for nano, luet install editors/nano )\nStart the sshd daemon:\n1  $ runit-start sshd   You should be able to log-in to your machine, check the ip with ip a.\nTo enable sshd on boot,\n1  $ runit-enable sshd   Once logged in, remind to change the configuration settings!\n","excerpt":"Installation At the moment Micro images are tested to be bootable with ‚Ä¶","ref":"/docs/micro/installation/","title":"Installation notes"},{"body":"Mocaccino Desktop is a Gentoo-based distribution (derived from Sabayon) oriented towards Desktop systems.\nIt contains installable ‚Äúapps‚Äù that we refer internally as ‚Äúlayers‚Äù to install common suite of packages needed to bootstrap a pure and simple OS.\nA User, should be able then to install KDE by calling luet install layers/plasma and nothing else. That package should bring all the necessary components to make the ‚Äúapp‚Äù work as expected. The user shouldn‚Äôt be exposed to the typical OS architecture of bringing with it dozens of dependencies.\nThink at it like Android apps: Install and uninstall should be as simple as that.\nThis approach is completely different from Mocaccino Micro, which is a LFS and all packages are compiled 1:1.\nIn this repository, updates are OTA-alike, with less friction as possible.\nWhy MOS Desktop is different? For the user, MOS Desktop is a pure and simple OS. We target to deliver an unique approach on package installation and upgrades. Applications should bundle all the required dependencies in order to run, or alternatively share common layers that are used between them (for example think about MATE, GNOME, and all software that depends on GTK). This allows users to have OTA-alike updates, without having to struggle with all packages dependencies.\nFrom a developer standpoint, MOS takes a unique approach on package building, allowing developers to iterate locally changes to the packages very easily, thanks to the Luet flexible backend approach. You can use Docker to build packages locally, or Kubernetes to build them in your cluster\n","excerpt":"Mocaccino Desktop is a Gentoo-based distribution (derived from ‚Ä¶","ref":"/docs/desktop/","title":"Mocaccino Desktop"},{"body":"Switching kernels MocaccinoOS images are shipping the latest LTS available Kernel version by default. It is possible to switch kernels by running mos kernel-switcher.\nList available kernels 1  $ mos kernel-switcher list   Switch to main kernels To switch to main kernels, that gets updated more frequently:\n1  $ mos kernel-switcher switch kernel/mocaccino-full   Switch to LTS kernels To switch to LTS kernels, run:\n1  $ mos kernel-switcher switch kernel/mocaccino-lts-full   ","excerpt":"Switching kernels MocaccinoOS images are shipping the latest LTS ‚Ä¶","ref":"/docs/general/kernels/","title":"Switching kernels"},{"body":" Warning This is currently experimental  In Micro, currently it‚Äôs possible to build packages with K3s and Luet\nFirst install k3s:\n1  luet install -y container/k3s runit-srv/k3s   And start it:\n1  $ runit-start k3s   To enable it permanently on boot, run runit-enable k3s\nWait for k3s to be ready (Until ContainerCreating becomes Ready):\n1  $ watch k3s kubectl get pods -A   Now install the luet controller:\n1  $ k3s kubectl apply -f https://raw.githubusercontent.com/mudler/luet-k8s/master/hack/kube.yaml   And wait for it to be ready:\n1  $ watch k3s kubectl get pods -A   Once all is up, we are ready to build packages, try for example with:\n1 2 3 4 5 6 7 8 9 10 11 12 13  $ cat \u003c\u003cEOF | k3s kubectl apply -f - apiVersion: luet.k8s.io/v1alpha1 kind: PackageBuild metadata: name: test spec: packageName: container/img repository: url: \"https://github.com/mocaccinoOS/mocaccino-extra\" options: pull: true imageRepository: \"quay.io/mocaccinocache/extra-amd64-cache\" EOF   In this case, we can inspect the build logs with:\n1  k3s kubectl logs -f test   Example  Full package build example  ","excerpt":" Warning This is currently experimental  In Micro, currently it‚Äôs ‚Ä¶","ref":"/docs/micro/building-packages/","title":"Building packages with Micro and k3s"},{"body":" Warning Mocaccino and Luet are under active development and should not be considered ‚Äúproduction ready‚Äù at this time. The following steps should only be carried out on test systems. Do make sure you have any important data backed up before.  Here are collected docs that applies to all flavors of MocaccinoOS\n","excerpt":" Warning Mocaccino and Luet are under active development and should ‚Ä¶","ref":"/docs/general/","title":"General section"},{"body":" Warning Mocaccino and Luet are under active development and should not be considered ‚Äúproduction ready‚Äù at this time. The following steps should only be carried out on test systems. Do make sure you have any important data backed up before.  Mocaccino Micro is a musl-based LFS distribution with a minimal set of packages in order to boot and build an entire OS.\nAt the moment are available alpha ISO releases, and the following docker images can be used:\n1  $ docker pull quay.io/mocaccino/micro   Extra repositories Additional packages are available in the mocaccino-extra repositories.\nTo enable them:\n1  $ luet install repository/mocaccino-extra   ","excerpt":" Warning Mocaccino and Luet are under active development and should ‚Ä¶","ref":"/docs/micro/","title":"Mocaccino Micro"},{"body":"MocaccinoOS Desktop and Micro automatically protects /etc from overwriting user-override changes. Although, upgrades might require to overwrite and upgrade specific default configuration. The mos cli embeds a config-update tool which is compatible with etc-update and dispatch-conf.\nTo show a summary of the config changes that requires merging:\n1 2 3  $ mos config-update check Files with unmerged config files: 1 - /etc/test/foo (2 unmerged config files)   Merging configuration To merge configurations interactively, run:\n1  mos config-update update   To check the configuration of all the files, 1-by-1, run:\n1  mos config-update update -a   Auto-merging It‚Äôs possible to auto-merge configurations automatically with:\n1  $ mos config-update update --interactive=false   ","excerpt":"MocaccinoOS Desktop and Micro automatically protects /etc from ‚Ä¶","ref":"/docs/general/system-config/","title":"System Configuration"},{"body":"System profiles are specific MocaccinoOS configuration that can be enabled/disabled from the mos cli.\nList available profiles To list all the installed available profiles, run mos profile list\nEnable profiles To enable a specific profile, run mos profile enable \u003cprofile\u003e\nDisable profiles To disable a profile, run mos profile disable \u003cprofile\u003e\nSearch available profiles To search all the available profiles for installation, run luet search system-profiles.\nTo install a specific profile, run luet install system-profile/\u003cname\u003e.\n","excerpt":"System profiles are specific MocaccinoOS configuration that can be ‚Ä¶","ref":"/docs/general/system-profiles/","title":"System profiles"},{"body":"Setup First install container/docker and systemd-service/dockerd, which provides the systemd service:\n1  $ luet install container/docker systemd-service/dockerd   To start dockerd, just:\n1  $ systemctl start docker   or to enable at boot:\n1  $ systemctl enable docker   Now you should be able to use docker as usual, for example:\n1 2 3 4 5 6 7  root@mocaccino:~# docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES root@mocaccino:~# docker images REPOSITORY TAG IMAGE ID CREATED SIZE quay.io/mocaccino/extra latest ce197d5b1a7e 3 days ago 21.2MB   ","excerpt":"Setup First install container/docker and systemd-service/dockerd, ‚Ä¶","ref":"/docs/desktop/docker/","title":"Running docker"},{"body":"Setup First install container/docker, or directly runit-srv/docker, which provides the runit service:\n1  $ luet install runit-srv/dockerd   To start dockerd, just:\n1  $ runit-start dockerd   or to enable at boot:\n1  $ runit-enable dockerd   Now you should be able to use docker as usual, for example:\n1 2 3 4 5 6 7  root@mocaccino:~# docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES root@mocaccino:~# docker images REPOSITORY TAG IMAGE ID CREATED SIZE quay.io/mocaccino/extra latest ce197d5b1a7e 3 days ago 21.2MB   ","excerpt":"Setup First install container/docker, or directly runit-srv/docker, ‚Ä¶","ref":"/docs/micro/docker/","title":"Running docker"},{"body":"Setup Be sure to have docker installed, and the daemon running.\nFirst install utils/whalebrew:\n1  $ luet install utils/whalebrew   Now you should be able to use whalebrew as usual\nInstall a package 1  $ whalebrew install whalebrew/ffmpeg   Then it should be accessible as a normal binary. You can call directly the program (ffmpeg in the above example)\n","excerpt":"Setup Be sure to have docker installed, and the daemon running.\nFirst ‚Ä¶","ref":"/docs/desktop/whalebrew/","title":"Whalebrew"},{"body":"Setup Wireguard comes embedded in the Mocaccino Kernels.\nFirst install wireguard-tools and the wg runit service:\n1  $ luet install runit-srv/wg networking/wireguard-tools   By default, the service sets up the wg0 interface, with configuration at /etc/wireguard/wg0.conf.\nEdit /etc/wireguard/wg0.conf with your configuration, or to change the default interface configuration, change the /etc/sv/wg/conf file accordingly.\nTo start wg, just:\n1  $ runit-start wg   or to enable at boot:\n1  $ runit-enable wg   Now you should be able to see the wg interface with wg show.\nMultiple connections For multiple connections, copy the /etc/sv/wg/ service directory to your custom one, for example /etc/sv/wg2 and tweak it accordingly to your needs. You can start it afterwards with runit-start wg2\n","excerpt":"Setup Wireguard comes embedded in the Mocaccino Kernels.\nFirst install ‚Ä¶","ref":"/docs/micro/wireguard/","title":"Running wireguard"},{"body":" Warning MocaccinoOS and this wiki is a work in progress, please help us improve by opening a PR or filing an issue.\nMocaccino and Luet are under active development and should not be considered ‚Äúproduction ready‚Äù at this time. The steps described in the article are for development only and should only be carried out on test systems.\n Welcome to the MocaccinoOS wiki!\nMocaccinoOS is a minimal meta-Linux Distribution. It uses Luet as Package Manager which is static and uses containers to build packages.\nMain features of MocaccinoOS:\n Focused on minimalism, small foot print and ease of use Native Vanilla upstream kernel: We follow closely kernel versions from upstream, lts included. Unique approach to Package Management: SAT solving applied also on package build in containers (docker, Kubernetes, ‚Ä¶ ) Meta distribution: It can be easily used to bootstrap other OS or spin-offs Local iteration: With the container ecosystem, it‚Äôs easy to iterate development locally Cloud first: support for the most important cloud technology in the landscape Different variants: from Server to Desktop, from systemd to runit!  Here you will find Installations, articles and how-tos for the MocaccinoOS variants\n","excerpt":" Warning MocaccinoOS and this wiki is a work in progress, please help ‚Ä¶","ref":"/docs/","title":"Documentation"},{"body":"This document has the objective to address several questions that starts with ‚ÄúHow do I ‚Ä¶ ?‚Äù\nHow do I start contributing? Have a look at the official Luet docs about package building, and feel free to submit your first PR! Be sure to also read all this document to get an Idea on how things should look like.\nHow do I know which version of a package is available in the Portage tree We pin Portage versions by using packages that are shipping a version of it. This guarantees that there are no moving parts, and we can in this way provide updates as part of a development lifecycle.\nWe have an automated bot that automatically opens PR to track new version of the available Portage version. The package is available here: https://github.com/mocaccinoOS/desktop/tree/master/packages/portage. You don‚Äôt need to do it manually. Just wait for a PR from MarvinHatesOceans to pop-up, we will review it and merge it only when we decide (after proper QA) that a development lifecycle is over.\nA Portage bump happens when:\n We close a dev cycle (release, and upgrades) Security fixes  So, how do I know which package I can build? At the moment is as easy as browsing the portage git and point it at the same commit of our package.\nFor example:\ngit.hash: \"b0e157b071cb23b348acab3d596b49f66c244808\" in https://github.com/mocaccinoOS/desktop/blob/e9ae4aafead5a79d1d36630c932d907361d8c93c/packages/portage/definition.yaml#L6 tells you that we are pinning at commit b0e157b071cb23b348acab3d596b49f66c244808 of portage tree. So you can e.g. point your browser at : https://github.com/gentoo/gentoo/tree/b0e157b071cb23b348acab3d596b49f66c244808\nHow do I revbump a package? (and when it‚Äôs actually needed?) By convention, we have chosen to increment the version of a package after the +, following semver notation.\nThat means, if a package version is at 1.0.0, it‚Äôs revbump version would be 1.0.0+1, and a subsequent one would be for example 1.0.0+2.\nWhen I do need to bump a package? Only when there is a new version available!\nWhen I do need to revbump a package? A Package revbump is necessary when you apply changes to build.yaml, although, it‚Äôs not always necessary, but just in few cases:\n When you change steps in the build.yaml When you change prelude in the build.yaml When you change requires in the build.yaml  What about packages depending on it? Always by convention, we have chosen to revbump manually those. Luet does support tracking automatically new package versions, but we want to make this transparent in the Git repository, so reverting changes introduced by mistakes it‚Äôs easier, and so we also rely on the caching mechanism of Luet.\nIf we don‚Äôt revbump reverse dependencies our CI would skip such changes, because we enforced this by policy.\nHow do I do that? Until https://github.com/mocaccinoOS/desktop/issues/7 is delivered, it is a manual process.\nHow do I add a useflag to a Portage package or layer? If the useflag you are going to add doesn‚Äôt have an huge impact on its dependencies (not requiring a rebuild) then it‚Äôs fine to apply at the spec-level. Otherwise it might be required to specify the useflags needed in that specific package, or on the parent layer which your package is depending on, requiring a package revbump.\nTake the layers/system-x package as an example, in the prelude steps of the package, we copy over the building container the custom useflags in the prelude steps:\n1 2 3 4 5  prelude:- cp-rfpackage.use/etc/portage/- cp-rfmake.conf/etc/portage/- cp-rfpackage.accept_keywords/etc/portage/- cp-rfpackage.license/etc/portage/  the package.use folder is actually shipped with the package spec. That approach can be used also in layers depending on system-x, with a separate set of flags. You just have to be sure to not override any useflag between layers, and to try to share as much as you can with parent layers while do you see it fit.\nHow do I split a package? A layer can be split into multiple packages, using the excludes/includes pattern which is used for example by gcc and gcc-base. This means you can safely compile packages into parent-layers, and exclude those in the final artifact which gets installed by the end-user.\nFor example, for gcc we drop the files from system-x, and we include explicitly files to the gcc package, which at that point doesn‚Äôt need to compile anything by itself. It just needs to depend on the parent layer, so all the gcc files are accessible from that container.\nIn the system-x spec, you will find something similar:\n1 2 3 4 5 6 7 8 9 10 11 12 13  excludes:...# GCC split- ^/etc/env.d/04gcc-x86_64-pc-linux-gnu- ^/etc/ld.so.conf.d/05gcc-x86_64-pc-linux-gnu.conf- ^/etc/env.d/gcc.*- ^/usr/lib/debug/usr/lib/gcc.*- ^/usr/lib/gcc/x86_64-pc-linux-gnu.*- ^/usr/share/gcc-data/x86_64-pc-linux-gnu.*- ^/usr/bin/c\\+\\+.*- ^/usr/bin/cc$- ^/usr/bin/cpp.*  This tells luet to exclude those files from the final artifact.\nSimilarly, you can find in the gcc package those files being included:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  includes:...- /usr/lib/gcc$- /usr/lib/gcc/x86_64-pc-linux-gnu$- /usr/lib/gcc/x86_64-pc-linux-gnu/{{.Values.version}}.*- /usr/lib/go$- /usr/lib/go/{{.Values.version}}.*- /usr/lib64$- /usr/lib64/go$- /usr/lib64/go/{{.Values.version}}.*- /usr/libexec$- /usr/libexec/gcc$- /usr/libexec/gcc/x86_64-pc-linux-gnu$- /usr/libexec/gcc/x86_64-pc-linux-gnu/{{.Values.version}}.*- /usr/share$- /usr/share/gcc-data$- /usr/share/gcc-data/x86_64-pc-linux-gnu$- /usr/share/gcc-data/x86_64-pc-linux-gnu/{{.Values.version}}.*  How do I try my changes? You need at least Docker running locally, or img installed.\nTo build a package, just edit/add the relevant specs and run PACKAGES=\"..\" make rebuild-all.\nHow can I debug the build environment? Luet generates docker images for each package, you can start a shell by either retrieving manually the docker image of the package with luet tree images and manually run docker run.. on it or you can use the luet extension which does that already for you. You need to have installed system/luet-devkit package, and you can use it as follows:\n1  DOCKER_HOST=\"...\" LUET_ARGS=\"--image-repository quay.io/mocaccinocache/desktop\" luet remote-exec packagename   Note: It‚Äôs not required DOCKER_HOST unless you want to leverage a remote host.\nOnce you are hooked into the container there are some limited tools at your disposal that might help you. For instance if you want to list all the atoms that are installed you can do:\n1  qlist -IRv   How do I add a package? Have a look at the official docs about specfile and their syntax. After you familiarize with it, you can just open up a PR, by taking as an example an already existing layer. See, for example calamares\nHow do I update provides list, and what are they? Provides are packages that your layer/package is going to satisfy. That means if other packages are depending on a package/foo, and that is provided by package/bar, package/bar will get installed in place of package/foo.\nAt the moment it‚Äôs a manual process - and we will work an automated way as soon as we have bandwidth for it. This mechanism it‚Äôs used to ensure a smooth migration path from Sabayon/Entropy based systems.\nHow do I know that a package belongs to a Layer? Packages belonging to a layer should be listed as provides, and also part of the arguments to emerge for compiling that package. Until we deliver https://github.com/mocaccinoOS/desktop/issues/6 - it is also a manual process. Refer to the section of this document ‚ÄúHow can I debug the build environment?‚Äù to see how to hook directly into a package container to inspect its content.\nHow do I find the duplicate files in the package repositories? You can use luet search and luet filter to compose a list of duplicate files. luet 0.11.3 returns the files in the packages as part of the json result:\n1  luet search -o json | luet filter   To install luet-filter, just run:\n1  luet install -y extension/filter   Note: luet search searches into online repositories enabled in the system unless --installed is specified. You need to have the desktop repo enabled locally in order to retrieve this list.\nThe package I want to add needs a user/group. Where do I add it? The user/groups in MocaccinoOS are defined by entities. They are an uniform way to define user/groups across different distributions in a unique and interoperable way. The same users/groups are indeed shared with Mocaccino Micro.\nAll the users groups are defined in a unique collection inside the os-commons repository, here\nHow do I add a system-wide extension, or configure a gnome setting? We have a gnome-skel package for that purpose. Check the content, apply the required changes and bump the package version.\n","excerpt":"This document has the objective to address several questions that ‚Ä¶","ref":"/docs/desktop/development/howdoi/","title":"Frequent questions"},{"body":"An AppImage is a downloadable file for Linux that contains an application and everything the application needs to run (e.g., libraries, icons, fonts, translations, etc.) that cannot be reasonably expected to be part of each target system.\nAppImages should work in MocaccinoOS as in other distributions, with no exception. If you encounter issues, please file a bug\nReferences  AppImage website List of some AppImage apps Another list of AppImage apps  ","excerpt":"An AppImage is a downloadable file for Linux that contains an ‚Ä¶","ref":"/docs/desktop/appimage/","title":"AppImages"},{"body":"MocaccinoOS Desktop supports flatpak, and it‚Äôs usage is encouraged for packages like Firefox, LibreOffice, ‚Ä¶\nTo install flatpak, run as root:\n1  $\u003e luet install apps/flatpak   Once flatpak is installed, from your user add the flathub repo:\n1  user $\u003e flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo   To install Firefox, for example, now you can:\n1  user $\u003e flatpak install org.mozilla.firefox   For a detailed documentation, we suggest as a follow-up reading the official docs, here you can find a short summary of the most used commands.\nSearch Applications can be found in any of the added remotes using the search command. For example:\n1  $ flatpak search gimp   Running applications After an application is installed, can be run by their id:\n1  $\u003e flatpak run org.gimp.GIMP   Updating To update all your installed applications and runtimes to the latest available version in Flatpak, run:\n1  $\u003e flatpak update   Accessing external paths (or storage) from Flatpak apps Flatpak runs applications in sandbox that prevents them to access the host content. You can although add paths that are accessible to a specific Flatpak app.\nFor example, to expose the path /mnt to our org.app.Id:\n1  $\u003e flatpak override --user --filesystem=/mnt org.app.Id   Flatseal is a GUI permissions manager which offer simple point-and-click permissions operations.\nReferences  Flatpak documentation Flathub Give access to flatpak applications bauh - a visual frontend for Flatpak (and others)  ","excerpt":"MocaccinoOS Desktop supports flatpak, and it‚Äôs usage is encouraged for ‚Ä¶","ref":"/docs/desktop/flatpak/","title":"Flatpak"},{"body":" Warning Building packages is a complex topic. Installing packages coming from untrusted repositories, or building packages in the wrong way might break your system.\nThe following steps should only be carried out on test systems. Do make sure you have any important data backed up before installing any package.\n MocaccinoOS desktop, even if based on portage, doesn‚Äôt support the direct usage of emerge. Although it‚Äôs possible to compile and install packages from portage.\nTo build a system package, instead use luet build. The following document tries to summarize the steps to build a package with emerge with luet build, and install and track it in a MocaccinoOS Desktop system, should cover the scenario: ‚Äúhey, can I install packages with emerge?\".\nRequirements  Be sure to have docker installed, and the daemon running. The document is assuming you are carrying the steps on MocaccinoOS Desktop (GNOME in the specific case). At least 30G of free disk space. To reclaim the space afterwards, run docker system prune --force --volumes --all  Follow the steps described in this document before going ahead.\nCreate a workspace First of all, let‚Äôs create a workspace. The packages that we will build have to persist somewhere in your local system, the location must be accessible while performing a luet upgrade. We will use /user/system_repository as an example. And we will assume the commands are running as root.\n1 2  $ mkdir -p /user/system_repository/tree $ cd /user/system_repository   All the commands from now on will be carried from the /user/system_repository directory.\nFirst package Let‚Äôs put our eyes on, let‚Äôs say, games-board/gnome-chess, and create a compilation definition for it.\nLet‚Äôs first declare it‚Äôs canonical name, or how you would actually install it afterwards with luet (e.g. luet install app/gnome-chess)\n1 2 3 4 5 6  $ mkdir tree/gnome-chess $ cat \u003c\u003cEOF \u003e\u003etree/gnome-chess/definition.yaml category: \"apps\" name: \"gnome-chess\" version: \"0.1\" EOF   Here the version doesn‚Äôt really matter, it‚Äôs mostly for you to keep it track in your system. You can decide to follow strictly the versioning from gnome-chess, or not.\nNow let‚Äôs get to the important part, the build definition. This tells luet how to compile your package:\n1 2 3 4 5 6 7 8 9  $ cat \u003c\u003cEOF \u003e\u003etree/gnome-chess/build.yaml package_dir: \"/package\" steps: - emerge --root /package games-board/gnome-chess requires: - category: \"layers\" name: \"gnome\" version: \"\u003e=0\" EOF   as you see, we are using emerge here to compile the package. The requires section tells from where it runs the command, which in this case is the MocaccinoOS desktop gnome layer. To see all the layers available, run luet search layers or to see the currently installed, you can run luet search --installed layers).\nNote The package_dir option tells luet where is the final package located. We use emerge --root here to specify a different location where our package is installed. We could also drop package_dir and --root from emerge and let luet compute the delta, but in this way it‚Äôs faster and less I/O intensive.  Note Even if the example shows how to build a package with emerge, it is although possible to create packages out from any docker image - even not by compiling. You have to be careful to check if any package dependencies are actually already shipped by the layers  Now let‚Äôs add an installation hook to our package, in our specific case (gnome-chess) we need a trigger to generate glib schemas right after the package gets installed in the system:\n1 2 3 4  $ cat \u003c\u003cEOF \u003e\u003etree/gnome-chess/finalize.yaml install: - glib-compile-schemas /usr/share/glib-2.0/schemas EOF   Building the package Now let‚Äôs build the packages (remember to run as root, or with sudo upfront):\n1  $ luet build --tree tree --pull --pull-repository quay.io/mocaccinocache/desktop --from-repositories --live-output --only-target-package apps/gnome-chess    Note The first time can take up some time due to downloading the images, but those are cached locally for local iteration. Time for a coffee!  After build is completed, generate the repository metadata:\n1  $ luet create-repo --tree tree   Install the package First let‚Äôs consume the repository we just created in our system:\n1 2 3 4 5 6 7 8 9 10  $ cat \u003c\u003cEOF \u003e\u003e /etc/luet/repos.conf.d/local.yaml name: \"local-repository\" description: \"Local repository\" type: \"disk\" enable: true cached: true priority: 99 urls: # Repository URLs - /user/system_repository/build EOF   Now we are ready to install gnome-chess locally:\n1  $ luet install apps/gnome-chess   Advanced topics Showing package files Luet shows already all the files shipped by a package with luet search. For example:\n1  $ luet search apps/gnome-chess -o yaml   Find duplicate files shipped by packages You can check duplicate files into the package shipped by repositories, also before installing them:\n1  luet search -o json | luet filter   This is particularly useful to check for any conflicting files with the system packages and the ones you are generating.\nSee also the dev section regarding duplicate files.\nRemoving generated docker images By default, images are tagged under luet/cache. So it‚Äôs possible to remove all the cache images generated by removing the luet/cache and quay.io/mocaccinocache/desktop images, although, you should also prune afterwards the images not referenced anymore by any tag with docker image prune:\n1 2 3  $ docker images --filter='reference=luet/cache' --format='{{.Repository}}:{{.Tag}}' | xargs -r docker rmi $ docker images --filter='reference=quay.io/mocaccinocache/desktop' --format='{{.Repository}}:{{.Tag}}' | xargs -r docker rmi $ docker image prune   A way to reclaim all the space occupied by docker more aggressively is by running docker system prune, but attention, this command will remove all the images, also the ones which weren‚Äôt generated by luet:\n1  $ docker system prune --force --volumes --all   References  Luet docs Luet Packages Luet hello world Emerge ebuild example  ","excerpt":" Warning Building packages is a complex topic. Installing packages ‚Ä¶","ref":"/docs/desktop/building_packages/","title":"Building packages locally"},{"body":"This documentation section tries to summarize and provide general guidelines while applying changes to MocaccinoOS Desktop.\nA prior knowledge of the basics of how to build packages with luet is assumed, it‚Äôs strongly adviced to follow the Getting started docs of Luet before going ahead.\n","excerpt":"This documentation section tries to summarize and provide general ‚Ä¶","ref":"/docs/desktop/development/","title":"Development guidelines"},{"body":"Create the webserver documentroot in your homedir 1  $ mkdir website   Install Apache container Now we pull the httpd:2.4 container from dockerhub and map the documentroot to our just created directory\n1  $ sudo docker run -dit --name my-web -p 8080:80 -v ~/website/:/usr/local/apache2/htdocs/ httpd:2.4   We use docker ps to confirm our container is running\n1 2 3  $ sudo docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES e837d58776cd httpd:2.4 \"httpd-foreground\" 18 seconds ago Up 16 seconds 0.0.0.0:8080-\u003e80/tcp my-web   Create a simple homepage Add index.html to our documentroot\n1 2 3 4 5 6 7 8 9 10 11 12  cat \u003c\u003cEOF \u003e\u003e/website/index.html \u003c!DOCTYPE html\u003e \u003chtml lang=\"en\"\u003e \u003chead\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003ctitle\u003eMy website rocks!\u003c/title\u003e \u003c/head\u003e \u003cbody\u003e \u003ch1\u003eWelcome to my homepage!\u003c/h1\u003e \u003c/body\u003e \u003c/html\u003e EOF   And we are done! To view the result simply open http://localhost:8080/ in your webbrowser!\nStop the container 1  $ sudo docker stop my-web   Remove the container 1  $ sudo docker rm my-web   Remove the dockerhub image 1  $ sudo docker image remove httpd:2.4   References  TecMint  ","excerpt":"Create the webserver documentroot in your homedir 1  $ mkdir website ‚Ä¶","ref":"/docs/desktop/apache_with_docker/","title":"Install Apache webserver"},{"body":"Development isos have the -dev suffix. Those are coming with the development repositories pre-installed. The -dev ISOs are intended for development and testing only, so this document outlines the steps to switch back and forth from the stable and unstable repositories.\nIdentify the installed repositories With luet repo list you can check the repositories currently installed in the system, for example:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  $ luet repo list mocaccino-repository-index MocaccinoOS Repository Index Revision 1 - 2021-01-02 17:47:32 +0100 CET luet Luet official Repository Revision 1 - 2021-04-23 20:11:47 +0200 CEST mocaccino-extra-stable MocaccinoOS extra Repository (stable) Revision 178 - 2021-04-23 18:35:14 +0200 CEST mocaccino-extra MocaccinoOS extra Repository Revision 178 - 2021-04-23 18:35:14 +0200 CEST mocaccino-repository-index MocaccinoOS Repository Index Revision 1 - 2021-01-02 17:47:32 +0100 CET   If the output doesn‚Äôt contain repositories named with -stable at the end, most likely you are using the development repositories.\nSwitch repositories Warning Do not mix development and stable repositories! Be sure to have installed in the system or the stable or the development repositories only.  In MocaccinoOS repositories are standard packages. To remove the development repositories, you can:\n1  $ luet uninstall -y repository/mocaccino-extra repository/mocaccino-kernel repository/mocaccino-desktop repository/mocaccino-os-commons   And then to enable the stable repositories:\n1  luet install -y repository/mocaccino-extra-stable repository/mocaccino-kernel-stable repository/mocaccino-desktop-stable repository/mocaccino-os-commons-stable   The same procedure is valid as well to switch from -stable to development repositories.\nThe difference is that you have to remove the -stable ones instead.\n","excerpt":"Development isos have the -dev suffix. Those are coming with the ‚Ä¶","ref":"/docs/desktop/repositories/","title":"Repositories"},{"body":"We love your input! We want to make contributing to this project as easy and transparent as possible, whether it‚Äôs:\n Reporting a bug Discussing the current state of the code Submitting a fix Proposing new features Becoming a maintainer  We Develop with Github We use github to host code, to track issues and feature requests, as well as accept pull requests.\nStay in touch Join us in slack and hang out with the community! It will be much easier to get started and do your first steps in contributing to the project.\nAll Code Changes Happen Through Pull Requests Pull requests are the best way to propose changes to the codebase. We actively welcome your pull requests:\n Fork the repo you want to contribute to and create your branch from master. If you‚Äôve added code that should be tested, add tests. If you‚Äôve changed APIs, update the documentation. Ensure the test suite passes. Make sure your code lints. Issue that pull request!  Any contributions you make will be under the Software License of the repository In short, when you submit code changes, your submissions are understood to be under the same License that covers the project. Feel free to contact the maintainers if that‚Äôs a concern.\nReport bugs using Github‚Äôs issues We use GitHub issues to track public bugs. Report a bug by opening a new issue; it‚Äôs that easy!\nWrite bug reports with detail, background, and sample code Try to be as more descriptive as possible. When opening a new issue you will be prompted to choose between a bug or a feature request, with a small template to fill details with. Be specific!\nGreat Bug Reports tend to have:\n A quick summary and/or background Steps to reproduce  Be specific! Give sample code if you can.   What you expected would happen What actually happens Notes (possibly including why you think this might be happening, or stuff you tried that didn‚Äôt work)  People love thorough bug reports.\nLicense By contributing, you agree that your contributions will be licensed under the project Licenses.\nReferences This document was adapted from the open-source contribution guidelines from https://gist.github.com/briandk/3d2e8b3ec8daf5a27a62\n","excerpt":"We love your input! We want to make contributing to this project as ‚Ä¶","ref":"/docs/contribution-guidelines/","title":"Contributing to MocaccinoOS"},{"body":"Become a donor today.\nIf you want to help us, but you cannot contribute to code, you can still buy us a coffee, or just donate a little bit of your HW power.\nAs a small open source project, know that every dollar will have an immense impact on our ability to continue working towards our mission.\nYour support means the world to us :)\nYou can donate by going to our Patreon page or if you prefer cryptocurrencies, we accepts donations to the following XMR wallet: 84AsfE73Cy7hAYKy7PN8N8D3fh39JzXyLjaiYpgXm3NrJHH7cTPxUJSgsdFiSL6mwE9MKpvrYJQoaTxRG6sJX6aBRpr45dc.\nBecome a Patron!\nDonating computing power If you want, you can also support our project by donating your idle computing power. We have a ‚Äúdonor‚Äù profile that you can install/uninstall any time. It will kick-in automatically xmrig when it detects a idle cpu in a range of 15m.\nDonate from Mocaccino Micro Install the following packages:\n1  $ luet install -y runit-srv/xmrig system-profile/donate cryptocurrency/xmrig   Enable the donate profile:\n1  $ mos profile enable donate   done!\nDonate from Mocaccino Desktop Install the following packages:\n1  $ luet install -y systemd-service/xmrig system-profile/donate cryptocurrency/xmrig   Enable the donate profile:\n1  $ mos profile enable donate   done!\nStop the service To stop the service, on Mocaccino Micro:\n1  $ runit-stop xmrig   while on Desktop:\n1  $ systemctl stop xmrig   Disable Just disable the donate profile:\n1  $ mos profile disable donate   Uninstall Just remove the installed packages, most importantly system-profile/donate which starts xmrig when the CPU is idling:\n1  $ luet uninstall -y system-profile/donate cryptocurrency/xmrig   Then remove the appropriate service, on Micro:\n1  $ luet uninstall -y runit-srv/xmrig   while on Desktop:\n1  $ luet uninstall -y systemd-service/xmrig   ","excerpt":"Become a donor today.\nIf you want to help us, but you cannot ‚Ä¶","ref":"/docs/donate/","title":"Donate"},{"body":"","excerpt":"","ref":"/community/","title":"Community"},{"body":"  #td-cover-block-0 { background-image: url(/featured-background_hu2226c7009d5c201991b3c3f4c09a60eb_1455824_960x540_fill_q75_catmullrom_top.jpg); } @media only screen and (min-width: 1200px) { #td-cover-block-0 { background-image: url(/featured-background_hu2226c7009d5c201991b3c3f4c09a60eb_1455824_1920x1080_fill_q75_catmullrom_top.jpg); } }  MocaccinoOS Learn More   Download   MocaccinoOS is a minimal Linux meta-Distribution for the 21th century! \n        Beyond Gentoo.\nMocaccinoOS uses Luet as Package Manager which is completely static and fully based on containers, and comes with two variants:\n Mocaccino Micro: Musl-based Linux From Scratch using only Luet. Suited for cloud and containers, but more to come as a Desktop flavor. Mocaccino Desktop: Gentoo-based (former Sabayon branch) suited for Desktop environments.        No frills MocaccinoOS uses a layered approach for system and common packages: smoother upgrades so you can focus on the things that really matters.\n   Contributions welcome! MocaccinoOS is a Work in progress, step over by our GitHub Organization. New users are always welcome!\nRead more ‚Ä¶\n   Get in touch on Slack! For discussions, announcements, etc.\nRead more ‚Ä¶\n     Upgrading is not anymore a nightmare  You can just focus on your work from now on  var text = [ \"game\", \"website\", \"music player\", \"ide\"]; var counter = 0; var elem = $(\"#work\"); setInterval(change, 3000); function change() { elem.fadeOut(function(){ elem.html(text[counter]); counter++; if(counter = text.length) { counter = 0; } elem.fadeIn(); }); }   luet upgrade -y  ‚†ñ Downloaded repository.yaml of 0.00 MB ( 0.00 MiB/s ) Repository mocaccino-repository-index is already up to date. ‚Ñπ Repository: mocaccino-repository-index Priority: 1 Type: http ‚†¶ Downloaded repository.yaml of 0.00 MB ( 0.00 MiB/s ) Repository luet-official is already up to date. ‚Ñπ Repository: luet Priority: 1 Type: http ‚†ê Downloaded repository.yaml of 0.00 MB ( 0.00 MiB/s ) Repository mocaccino-extra is already up to date. ‚Ñπ Repository: mocaccino-extra-stable Priority: 2 Type: http ‚†â Downloaded repository.yaml of 0.00 MB ( 0.00 MiB/s ) Repository mocaccino-extra is already up to date. ‚†à ‚Ñπ Repository: mocaccino-extra Priority: 2 Type: http ‚†ã Downloaded repository.yaml of 0.00 MB ( 0.00 MiB/s ) Repository mocaccino-repository-index is already up to date. ‚Ñπ Repository: mocaccino-repository-index Priority: 1 Type: http ü§î Computing upgrade, please hang tight‚Ä¶ üí§ \n  var termynal = new Termynal('#upgrade')   \n Focus on the things that matter.  MocaccinoOS Desktop uses a layered approach. Most common system packages and desktop environments (DE) are packaged as single installable layers, along with libraries. The system set is only composed by 2 core layers\nCompletely out of sight ! MocaccinoOS Micro is a LFS Musl OS, not based on layers, but with a tiny core package set, suitable for cloud and embedded environment. Easy to build packages on.          Static package manager Versioned rootfs as layers, delivered as upgrades or multiple single packages. You can choose the format you like. Musl? Server variant ? we get you covered\n   Layers Static package manager, your system will always be recoverable!\n   Build your packages Thanks to the Docker-based package manager, building and sharing packages has never been so easy!\n     Customize your experience A declarative suite of tools to set your box in the Cloud or in a Server environment        lxd-compose lxd-compose like docker-compose, but for lxd!\n   simplestreams-builder simplestreams-builder simplifies the process for creating the files and directories tree for exposing LXC/LXD images over simplestreams protocol\n   Declarative user management With entities users and groups in your systems are formally declared and can be carried over system easily\n       Yip yip is a small-footprint distro-agnostic cloud-init style tool. Statically built which executes and sets Linux system configurations.\n   Charty charty is a small-footprint templated test-runner. We use it to run QA checks against our packages!\n   Luet luet is a small-footprint static Golang package manager. It uses SAT and RL approaches to solve package dependencies.\n    ","excerpt":"  #td-cover-block-0 { background-image: ‚Ä¶","ref":"/","title":"MocaccinoOS"},{"body":"","excerpt":"","ref":"/search/","title":"Search Results"}]